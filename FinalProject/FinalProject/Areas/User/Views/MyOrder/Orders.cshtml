@model List<order>
@{
    ViewData["Title"] = "Orders";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h1 class="nav-colr">My Orders</h1>
@if (Model == null)
{
    <h2 class="nav-colr">No Orders</h2>
}
else
{
<table class="table table-hover table-striped">
    <thead class="thead-dark">
        <tr>
            <th scope="col">Number</th>
            <th scope="col">Date</th>
            <th scope="col">Price</th>
            <th scope="col">Address</th>
            <th scope="col">Status</th>
            <th scope="col"></th>
        </tr>
    </thead>
    <tbody>
        @foreach (var order in Model)
        {
        <tr>
            <td>@order.orderId</td>
            <td>@order.orederDate</td>
            <td>@order.orderTotalPrice</td>
            <td>@order.orderAddress</td>
            <td>@order.orderStatus</td>
            
            <td><button  type="button" class="btn link-product-add-cart" onclick="showModal(@order.orderId)"  id="OrderItemsBtn">Show Items</button></td>
            @if (order.orderStatus == "Pending" || order.orderStatus == "")
            {
                <td><a class="btn link-product-add-cart">Cancel Order</a></td>
            }
        </tr>
        }
    </tbody>
</table>
}
<div id="modalDiv" class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content" id="OrderItemsLoad">
            @*Order Items Details*@
           
        </div>
    </div>
</div>


<script>
    /* when the order items button is clicked it show the modal first and then
     * make an ajax request to get the items of that order
     * then load them in the modal body section
     */ 

    function showModal(id) {
        $("#modalDiv").modal({ show: true });

        $("#OrderItemsLoad").load("/User/MyOrder/GetOrderItems?orderId=" + id);

    }

</script>